{"version":3,"file":"index.js","sources":["../src/js/11-module.js"],"sourcesContent":["//; Module № 11. HTTP-запити і взаємодія з бекендом\nimport axios from 'axios';\n\n//! 1 ------ Інтернет і протоколи -------\n\n//! 2 ------HTTP запити -------\n// #region  //: - Прикалди запитів\n\n// ; Базове звернення\n\n// fetch('https://jsonplaceholder.typicode.com/comments')\n//   .then(response => {\n//     return response.json();\n//   })\n//   .then(data => {\n//     console.log(data);\n//   });\n\n// ; foo 1 variant\n// fetch('https://jsonplaceholder.typicode.com/comments?postId&name');\n\n// function getId(x) {\n//   fetch(`https://jsonplaceholder.typicode.com/comments?userId=${x}`);\n// }\n\n// getId(2);\n\n// ; розбивання посилання на декілька сегментів\n// function getCommemts(id) {\n//   const baseUrl = 'https://jsonplaceholder.typicode.com';\n//   const endPoint = '/comments';\n//   const params = new URLSearchParams({\n//     id: id,\n//     //* написано у вигляді обʼєкта. перетворюється на рядок\n//     //* якщо обєжктів декілька то автоматично ставитьсяамперсант& між обʼєктами врядку\n//     //; userId:1&userName:shoni\n//   });\n\n//   const url = `${baseUrl}${endPoint}?${params}`;\n\n//   return fetch(url).then(res => res.json());\n// }\n\n// getCommemts(130).then(array => {\n//   console.log(array);\n// });\n// ця функція повертає проміс тому це тепер проміс хначить діє then\n\n// #endregion\n\n// #region  //: - Перевірка відповіді\n\n// - .json() - парсить відповідь JSON\n// - .text() - парсить відповідь у вигляді тексту на приклад табличці дані .csv\n// - .blob() - викор для обробки файлів зобр, аудіо,відео\n\n// За замовчуванням fetch() не вважає HTTP-коди 404 чи 500 помилками. Тому потрібно вручну перевіряти статус відповіді та створювати помилку для обробки в catch().\n\n// fetch('https://jsonplaceholder.typicode.com/users')\n//   .then(response => {\n//     if (!response.ok) {\n//       throw new Error('HTTP error! Status: ${response.status}');\n//     }\n//     return response.json();\n//   })\n//   .then(data => {\n//     console.log('отримані дані: ', data);\n//   })\n//   .catch(error => {\n//     console.log('Помилка запиту:', error);\n//   });\n\n//   Чому це важливо?\n\n// fetch() не відхиляє проміс при помилках сервера (наприклад, 404 або 500).\n// Щоб виявити невдалий запит, потрібно вручну перевіряти response.ok.\n// Якщо response.ok === false, необхідно викликати throw new Error(), щоб помилка оброблялася в catch().\n\n// Такий підхід дозволяє коректно реагувати на помилки та уникати несподіваної поведінки в коді.\n\n// #endregion\n\n// #region  //: - HTTP-методи\n\n// -  У REST API використовується кілька основних HTTP-методів для взаємодії з ресурсами:\n\n// -  POST — створює новий ресурс.\n// -  GET — отримує набір ресурсів або один ресурс.\n// -  PUT — оновлює існуючий ресурс або створює новий.\n// -  PATCH — частково оновлює існуючий ресурс.\n// -  DELETE — видаляє ресурс.\n// метод запиту задається чере ОБʼЄКТ налаштувань фкий передається другим аргументом у fetch()\n\n// Важливі нюанси\n\n// Якщо виконується GETзапит, вказувати method: \"GET\" не обов’язково, оскільки це значення за замовчуванням.\n// Доступні HTTP-методи для кожного ресурсу описані у документації бекенду\n\n// const options = {\n//   method: 'GET',\n// };\n\n// fetch('https://jsonplaceholder.typicode.com/users', options)\n//   .then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   })\n//   .then(data => {\n//     console.log('Дата');\n//   })\n//   .catch(error => {\n//     console.log('Помилка');\n//   });\n\n// #endregion\n\n// #region  //: - HTTP-заголовки\n\n// Як передати заголовки у fetch()?\n// Заголовки додаються у властивість headers об’єкта налаштувань:\n\n// fetch('http://localhost:5173/partials/module-11.html', {\n//   headers: {\n//     'Content-Type': 'application/json',\n//     'X-Custom-Header': 'custom value',\n//   },\n// });\n\n// fetch('https://jsonplaceholder.typicode.com/users', {\n//   headers: {\n//     Accept: 'application/json',\n//   },\n// }).then(response => {});\n// #endregion\n\n// #region  //: - Кросдоменні запити\n// GET /users\n// Host: my-api.com\n// Origin: https://my-site.com\n\n// #endregion\n\n//! 3 ------ AJAX -------\n\n// #region  //: - Оновлення інтерфейсу\n// const fetchUsersBtn = document.querySelector('.btn');\n// const userList = document.querySelector('.user-list');\n\n// fetchUsersBtn.addEventListener('click', () => {\n//   fetch('https://jsonplaceholder.typicode.com/users')\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     })\n//     .then(users => {\n//       const markup = users\n//         .map(user => {\n//           return `<li>\n// \t          <p><b>Name</b>: ${user.name}</p>\n// \t          <p><b>Email</b>: ${user.email}</p>\n// \t          <p><b>Company</b>: ${user.company.name}</p>\n// \t        </li>`;\n//         })\n//         .join('');\n//       userList.insertAdjacentHTML('beforeend', markup);\n//     })\n//     .catch(error => console.log(error));\n// });\n\n// ; 2\n\n// const fetchUsersBtn = document.querySelector('.btn');\n// const userList = document.querySelector('.user-list');\n\n// fetchUsersBtn.addEventListener('click', () => {\n//   fetchUsers()\n//     .then(users => renderUsers(users))\n//     .catch(error => console.log(error));\n// });\n\n// function fetchUsers() {\n//   return fetch('https://jsonplaceholder.typicode.com/users').then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n\n// function renderUsers(users) {\n//   const markup = users\n//     .map(user => {\n//       return `<li>\n//           <p><b>Name</b>: ${user.name}</p>\n//           <p><b>Email</b>: ${user.email}</p>\n//           <p><b>Company</b>: ${user.company.name}</p>\n//         </li>`;\n//     })\n//     .join('');\n//   userList.insertAdjacentHTML('beforeend', markup);\n// }\n// #endregion\n\n// #region  //: - Помилка новачка\n\n//^ Висновок: дані з асинхронного запиту доступні тільки в then().\n//^ Використовувати їх у синхронному коді поза then() – помилка. Це один з\n//^ найважливіших принципів роботи з асинхронністю в JavaScript!\n\n// let globalVar; // undefined\n\n// 1. Виконуємо HTTP-запит\n// fetch('https://jsonplaceholder.typicode.com/users')\n//   .then(response => response.json())\n//   .then(users => {\n//     console.log('users inside then callback: ', users);\n\n//     // Асинхронно записуємо результат запиту в зовнішню змінну\n//     globalVar = users;\n\n//     // Усередині колбека методу then усе добре\n//     console.log('globalVar inside fetch callback: ', globalVar);\n//   });\n\n// // Зовні колбека методу then у синхронному\n// // коді немає доступу до даних асинхронної відповіді бекенда\n// // тому що цей код виконаєтся перед кодом в методі then\n// console.log('globalVar outside fetch: ', globalVar); // undefined\n\n// // ; Як правильно працювати з даними?\n\n// fetch('https://jsonplaceholder.typicode.com/users')\n//   .then(responde => responde.json())\n//   .then(users => {\n//     // Можемо використати тут\n//     console.log('Отримані користувачіЮ', users);\n//     // Або передати в ффункцію для обробки\n//     renderUsers(users);\n//   })\n//   .catch(error => console.log('Помилка:', error));\n// // Замість використання зовнішньої змінної, всі операції з отриманими даними потрібно виконувати всередині then():\n\n// #endregion\n\n// #region  //: - Параметри рядка запиту\n\n// Параметри запиту дозволяють передавати на бекенд додаткові критерії для\n// отримання потрібних даних.Вони можуть використовуватися для:\n\n// Обмеження кількості результатів (наприклад, отримати лише 7 записів).\n// Сортування за певною властивістю (наприклад, за іменем або датою).\n// Фільтрації результатів за певними умовами.\n\n//- Синтаксис параметрів у URL\n\n//- Параметри додаються після ?.\n//- Кожен параметр — це пара ключ=значення.\n//- Кілька параметрів розділяються символом &.\n\n// У документації JSONPlaceholder API вказано такі параметри:\n\n//- _limit — обмежує кількість записів у відповіді.\n//- _sort — сортує отримані дані за вказаним полем\n\nhttps: fetch('https://jsonplaceholder.typicode.com/users?_limit=7&_sort=name');\n\n// #endregion\n\n// #endregion\n\n//! 4 ------ Бібліотека Axios -------\n\n// #region  //: -\n// Axios — це зручна альтернатива стандартному Fetch API.\n// #endregion\n\n// #region  //: -\n\n// #endregion\n\n// #region  //: -\n\n// #endregion\n\n// #region  //; - Задачі\n\n// #endregion\n"],"names":[],"mappings":"ssBAGA;AAEA;AA2IA;AA4HO,MAAM,gEAAgE,EAM7E;"}